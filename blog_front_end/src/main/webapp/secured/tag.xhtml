<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"     
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
  
    <h:head>
        <title>Admin page</title>
        
    </h:head>
    <h:body>
        <ui:composition template="/secured/template.xhtml">
            <ui:define name="content"> 
                <h:form>
                    <h3>Welcome #{loginBean.username}</h3>
                        
                    
                    <h:outputText value="This is a secured welcome page!"/>
                    <br/>
                     <h:commandLink action="#{loginBean.doLogout}" value="Logout"/>
                     <ui:repeat value="#{tag_con.byTag}" var="t">
                                <article class="topcontent">
                                    
                                    
                                        <ui:repeat value="#{t}" var="s">
                                            <div><h:commandLink action="#{posts.deletePost(s.id)}" value="Delete post"/></div>
                                                <header>
                                                        <h2><a href="#" rel="bookmark" title="Permalink to this POST TITLE"><h:outputText value="#{s.title}"/></a></h2>
                                                </header>

                                                <footer>
                                                    <h4><h:outputText value="Posted by #{s.author.name}"></h:outputText></h4>
                                                </footer>

                                                <content>

                                                    <h:panelGrid columns="1" cellpadding="10">
                                                        <p:graphicImage rendered="#{s.class.name eq 'com.skrubb.blog_back_end.core.PhotoPost'}" value="/resources/img/#{s.data}" />
                                                        <h:outputText rendered="#{s.class.name eq 'com.skrubb.blog_back_end.core.TextPost'}" value="#{s.data}" />
                                                    </h:panelGrid>
                                                 
                                                 </content>
                                            
                                            <ui:repeat value="#{s.tags}" var="tag">
                                                <h:commandLink action="#{navigation.toTag(tag.value)}" value="#{tag.value}">
                                        	<f:param name="tag" value="#{tag.value}" />
                                                </h:commandLink>
                                                
                                            
                                            </ui:repeat>
                                                 
                                            <!-- Comments-->
                                                 <header>
                                                    <a href="#" id="comments">Comments</a>
                                                </header>
                                                <content>
                                                    <p>...This is all visible content... 
                                                    <a href="#" id="#{s.id}-show" class="showLink" 
                                                    onclick="showHide(#{s.id});return false;">See more.</a>
                                                    </p>

                                                    <div id="#{s.id}" class="more">
                                                            <p>...This content is hidden by default...</p>
                                                            <p><a href="#" id="#{s.id}-hide" class="hideLink" 
                                                            onclick="showHide(#{s.id});return false;">Hide this content.</a></p>
                                                    </div>
                                               </content>
                                        </ui:repeat>     
                                    </article>
                                            
           
                        </ui:repeat>
                   
                </h:form>    
            </ui:define>
        </ui:composition>
        
    </h:body>
</html>